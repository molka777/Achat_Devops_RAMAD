version: '3'
services:
 mysql:
  image: mysql:8.0
  restart: always
  ports:
   - 3306:3306
  environment:
   MYSQL_ROOT_PASSWORD: root
   MYSQL_DATABASE: achatdb
  volumes:
   - mysql-data:/var/lib/mysql
 spring-app:
  container_name: spring_back
  image: ratatouka/achat:latest
  ports:
   - 8089:8089
  depends_on:
   - mysql
  environment:
   SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/achatdb
   SPRING_DATASOURCE_USERNAME: root
   SPRING_DATASOURCE_PASSWORD: root
volumes:
 mysql-data:
